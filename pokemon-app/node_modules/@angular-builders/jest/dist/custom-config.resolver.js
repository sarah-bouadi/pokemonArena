"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CustomConfigResolver = void 0;
const core_1 = require("@angular-devkit/core");
const fs_1 = require("fs");
class CustomConfigResolver {
    constructor(logger) {
        this.logger = logger;
    }
    resolveGlobal(workspaceRoot) {
        const packageJsonPath = (0, core_1.getSystemPath)((0, core_1.join)(workspaceRoot, 'package.json'));
        const packageJson = require(packageJsonPath);
        const workspaceJestConfigPath = (0, core_1.getSystemPath)((0, core_1.join)(workspaceRoot, 'jest.config.js'));
        return (packageJson.jest ||
            ((0, fs_1.existsSync)(workspaceJestConfigPath) && require(workspaceJestConfigPath)) ||
            {});
    }
    resolveForProject(projectRoot, configPath) {
        const jestConfigPath = (0, core_1.getSystemPath)((0, core_1.join)(projectRoot, configPath));
        if (!(0, fs_1.existsSync)(jestConfigPath)) {
            this.logger.warn(`warning: unable to locate custom jest configuration file at path "${jestConfigPath}"`);
            return {};
        }
        return require(jestConfigPath);
    }
}
exports.CustomConfigResolver = CustomConfigResolver;
//# sourceMappingURL=custom-config.resolver.js.map